<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zodiac Protocol: Final Edition</title>
<style>
    :root {
        --bg: #121212;
        --panel: #1e1e1e;
        --text: #e0e0e0;
        --accent: #00ff9d; /* Cyberpunk Green */
        --dim: #666;
        --border: #333;
    }

    body {
        font-family: 'Courier New', Courier, monospace;
        background: var(--bg);
        color: var(--text);
        padding: 40px;
        max-width: 850px;
        margin: 0 auto;
        line-height: 1.6;
    }

    /* -------------------------------------------------------
       THE PREFACE (Manifesto)
       ------------------------------------------------------- */
    .manifesto {
        border-left: 4px solid var(--accent);
        padding: 20px;
        background: #1a1a1a;
        margin-bottom: 40px;
        font-size: 0.9em;
        color: #ccc;
    }
    .manifesto strong { color: #fff; }

    h1 {
        border-bottom: 2px solid var(--accent);
        padding-bottom: 15px;
        letter-spacing: 2px;
        text-transform: uppercase;
        font-size: 1.8em;
        margin-bottom: 10px;
        color: #fff;
    }

    .subtitle { color: var(--dim); margin-bottom: 40px; font-size: 0.9em; }

    /* -------------------------------------------------------
       CONTROLS (Sleek Interface)
       ------------------------------------------------------- */
    .control-panel {
        background: var(--panel);
        padding: 30px;
        border-radius: 8px;
        margin-bottom: 40px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        border: 1px solid var(--border);
    }

    .input-row { display: flex; gap: 20px; margin-bottom: 20px; }
    .field { flex: 1; }

    label {
        display: block;
        color: var(--accent);
        font-weight: bold;
        font-size: 0.8em;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    input {
        width: 100%;
        padding: 15px;
        background: #2a2a2a;
        border: 1px solid #333;
        color: white;
        font-family: inherit;
        font-size: 1.1em;
        box-sizing: border-box;
        border-radius: 4px;
        transition: border 0.2s;
    }
    input:focus { outline: none; border-color: var(--accent); }

    button.forge-btn {
        width: 100%;
        padding: 15px;
        background: var(--accent);
        color: #000;
        font-weight: bold;
        border: none;
        font-size: 1.1em;
        text-transform: uppercase;
        cursor: pointer;
        border-radius: 4px;
        transition: transform 0.1s;
    }
    button.forge-btn:hover { transform: translateY(-2px); box-shadow: 0 0 15px rgba(0, 255, 157, 0.4); }

    /* -------------------------------------------------------
       OUTPUT (The Artifact)
       ------------------------------------------------------- */
    .artifact {
        display: none; /* Hidden until active */
        background: white;
        color: black;
        padding: 30px;
        border-radius: 4px;
        margin-bottom: 40px;
    }

    .grid-container {
        display: grid;
        grid-template-columns: 30px repeat(10, 1fr);
        gap: 1px;
        background: #999;
        border: 2px solid #000;
        margin-bottom: 30px;
        margin-top: 20px;
    }

    .grid-cell {
        background: #fff;
        aspect-ratio: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 11px;
        overflow: hidden;
        white-space: nowrap;
        color: #555; /* Noise Color */
    }

    .grid-header {
        background: #eee;
        font-size: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
    }

    /* Highlights (Screen Only) */
    .planted {
        color: #000;
        background-color: #d1e7dd;
        border: 2px solid #0f5132;
        z-index: 10;
    }

    /* PASSWORD BOX */
    .password-section {
        background: #f0f0f0;
        padding: 20px;
        text-align: center;
        border: 2px dashed #333;
        position: relative;
    }

    .final-password {
        font-size: 1.8em;
        font-weight: bold;
        letter-spacing: 2px;
        display: block;
        margin: 15px 0;
        word-break: break-all;
    }

    .copy-btn {
        position: absolute;
        right: 10px;
        top: 10px;
        background: black;
        color: white;
        border: none;
        padding: 5px 15px;
        font-family: inherit;
        font-weight: bold;
        cursor: pointer;
        font-size: 0.8em;
        text-transform: uppercase;
    }

    /* -------------------------------------------------------
       MANUAL & INSTRUCTIONS
       ------------------------------------------------------- */
    .detailed-manual {
        border-top: 1px solid var(--dim);
        padding-top: 30px;
        margin-top: 50px;
        color: #aaa;
        font-size: 0.9em;
    }
    .detailed-manual h3 { color: var(--accent); text-transform: uppercase; }
    .step { margin-bottom: 20px; }
    .step strong { color: #fff; }
    .hl { color: var(--accent); }

    /* -------------------------------------------------------
       PRINT MODE (STEALTH)
       ------------------------------------------------------- */
    @media print {
        body { background: white; color: black; padding: 0; }
        .manifesto, .control-panel, .password-section, h1, .subtitle { display: none !important; }
        
        /* Show Grid Cleanly */
        .artifact { display: block !important; border: none; padding: 0; }
        .grid-container { border: 2px solid black; background: black; }
        .grid-cell { 
            border: 1px solid black; 
            color: black !important; 
            background: white !important; 
            font-weight: normal !important; 
        }
        .grid-header { background: #eee !important; color: black !important; border: 1px solid black; }
        
        /* Show Manual */
        .detailed-manual { display: block !important; color: black !important; border-top: 2px solid black; }
        .detailed-manual h3 { color: black !important; border-bottom: 1px solid black; }
        .detailed-manual strong { color: black !important; }
        .hl { color: black !important; font-weight: bold; }
    }
</style>
</head>
<body>

    <h1>The Zodiac Protocol</h1>
    <div class="subtitle">Deep Time Identity Survival System</div>

    <div class="manifesto">
        <strong>THE PREFACE:</strong><br>
        The ultimate point of failure isn't the cryptography or the steganography; it's the human brain's ability to forget the system itself. Spitting out infinite systems is easy. Creating one that is unforgettable is the real challenge. This is an alternative to closed-gate "black box" algorithms like LastPass where no one remembers their passwords. This tool creates a light that survives even if the digital world goes dark.
    </div>

    <div class="control-panel">
        <div class="input-row">
            <div class="field">
                <label>1. The Embark Date </label>
                <input type="text" id="zCode" placeholder="e.g., 211125 (Any Numbers)" oninput="generate()">
            </div>
            <div class="field">
                <label>2. The Source Text (Memorized)</label>
                <input type="text" id="zText" placeholder="e.g. The quick brown fox..." oninput="generate()">
            </div>
        </div>
    </div>

    <div id="artifactOutput" class="artifact">
        <!-- DIGITAL RESULT (HIDDEN ON PRINT) -->
        <div class="password-section">
            <label style="font-size:10px; font-weight:bold; color:#666;">GENERATED KEY</label>
            <button class="copy-btn" onclick="copyPass()">Copy</button>
            <span id="finalPass" class="final-password">---</span>
        </div>

        <!-- THE GRID -->
        <div id="grid" class="grid-container"></div>
    </div>

    <div class="detailed-manual">
        <h3>Deep Time Recovery Manual</h3>
        <p>If this artifact is lost, you can reconstruct your password in the dirt using <strong>Chimera Logic</strong>.</p>

        <div class="step">
            <strong>STEP 1: THE BRAID</strong><br>
            Take your <strong>Date</strong> and your <strong>Text</strong>.<br>
            Pair every Digit of the date with a Word from the text.<br>
            <em>(Example: Digit "5" pairs with Word "Fox").</em>
        </div>

        <div class="step">
            <strong>STEP 2: THE MANTRA</strong><br>
            For every pair, write exactly 4 characters using this formula:<br>
            <span class="hl">HEAD (Cap) + TAIL (Low) + DIGIT + SYMBOL (Length)</span>
        </div>

        <div class="step">
            <strong>STEP 3: THE SYMBOL MAP (Standard Keyboard)</strong><br>
            1=! &nbsp; 2=@ &nbsp; 3=# &nbsp; 4=$ &nbsp; 5=% &nbsp; 6=^ &nbsp; 7=& &nbsp; 8=* &nbsp; 9=( &nbsp; 0=)
        </div>

        <div class="step">
            <strong>STEP 4: EXAMPLE EXECUTION</strong><br>
            Word: "Fox" (Length 3). Digit: "5".<br>
            1. <strong>Head:</strong> "F" (First letter Upper)<br>
            2. <strong>Tail:</strong> "x" (Last letter Lower)<br>
            3. <strong>Digit:</strong> "5" (From your date)<br>
            4. <strong>Sym:</strong> "#" (Length is 3, Shift+3 is #)<br>
            <strong>RESULT: Fx5#</strong>
        </div>

        <div class="step">
            <strong>STEP 5: GRID RECOVERY</strong><br>
            If using the printed grid, your segments are hidden at:<br>
            <strong>Row [Digit]</strong> and <strong>Column [Sequence 0, 1, 2...]</strong>.
        </div>
    </div>

<script>
    function generate() {
        // 1. CLEAN INPUTS
        const codeRaw = document.getElementById('zCode').value.replace(/[^0-9]/g, '');
        const textRaw = document.getElementById('zText').value.replace(/[^a-zA-Z0-9\s]/g, '').trim();
        
        const artifact = document.getElementById('artifactOutput');

        if (!codeRaw || !textRaw) {
            artifact.style.display = 'none';
            return;
        }

        // 2. CHIMERA LOGIC
        const map = [")","!","@","#","$","%","^","&","*","("]; // 0-9
        const words = textRaw.split(/\s+/);
        
        let segments = [];
        let fullPassword = "";

        for(let i=0; i<codeRaw.length; i++) {
            let digit = codeRaw[i];
            let word = words[i % words.length];
            
            // Head (Cap)
            let head = word.charAt(0).toUpperCase();
            // Tail (Low)
            let tail = word.charAt(word.length - 1).toLowerCase();
            // Length
            let len = word.length;
            // Symbol (Len % 10)
            let sym = map[len % 10];

            // Construct Segment
            let seg = head + tail + digit + sym;
            segments.push(seg);
            fullPassword += seg;
        }

        // 3. PLANTING LOGIC (Diagonal Spread)
        // Row = Digit. Column = Index % 10.
        let targets = [];
        for(let i=0; i<segments.length; i++) {
            let r = parseInt(codeRaw[i]);
            let c = i % 10;
            
            // Handle collision by appending if cell is occupied
            let existing = targets.find(t => t.r === r && t.c === c);
            if(existing) {
                existing.val += segments[i];
            } else {
                targets.push({ r: r, c: c, val: segments[i] });
            }
        }

        // 4. RENDER GRID
        const gridEl = document.getElementById('grid');
        gridEl.innerHTML = "";

        // Header
        gridEl.appendChild(mkCell(" ", "grid-header"));
        for(let i=0; i<10; i++) gridEl.appendChild(mkCell(i, "grid-header"));

        // Body
        for(let r=0; r<10; r++) {
            gridEl.appendChild(mkCell(r, "grid-header")); // Left Axis
            
            for(let c=0; c<10; c++) {
                // Check if planted
                let plant = targets.find(t => t.r === r && t.c === c);
                
                if(plant) {
                    let cell = mkCell(plant.val, "grid-cell planted");
                    gridEl.appendChild(cell);
                } else {
                    // GASLIGHT NOISE
                    // Must look like: Cap + Low + Digit + Sym
                    gridEl.appendChild(mkCell(makeNoise(), "grid-cell"));
                }
            }
        }

        // 5. OUTPUT
        document.getElementById('finalPass').innerText = fullPassword;
        artifact.style.display = 'block';
    }

    // UTILS
    function mkCell(txt, cls) {
        let d = document.createElement('div');
        d.className = cls;
        d.innerText = txt;
        return d;
    }

    function makeNoise() {
        const C = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const L = "abcdefghijklmnopqrstuvwxyz";
        const N = "0123456789";
        const S = ")!@#$%^&*(";
        return C[rn(C)] + L[rn(L)] + N[rn(N)] + S[rn(S)];
    }
    function rn(s) { return Math.floor(Math.random() * s.length); }

    function copyPass() {
        navigator.clipboard.writeText(document.getElementById('finalPass').innerText);
        alert("Securely Copied.");
    }
</script>

</body>
</html>
